#chatZone
  = stylesheet_link_tag 'chat'
  %h3 Pixie Chat
  %ul#chats
  = text_field_tag :chat_body
  %button Send

:plain
  <script src="http://localhost:8080/application.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
    var jug = new Juggernaut;
    jug.subscribe("/chats", function(data){
      var li = $("<li />");
      var name = $('<span />').addClass("name").text(data.name + ":");
      var time = $('<span />').addClass("time").text(" " + data.time + " ");
      var message = $('<span />').addClass("message").text(data.message);
      li.append(name).append(time).append(message);
      $("#chats").append(li);
    });

    $(function() {
      var field = $('#chatZone button').prev();

      $('#chatZone #chat_body').keypress(function(e) {
        if(e.keyCode == '13' && field.val() != "") {
          $.post('/chat', {
            body: field.val()
          });
          field.val("");
        }
      });
      $('#chatZone button').click(function() {
        if (field.val() != "") {
          $.post('/chat', {
            body: field.val()
          });
        }
        field.val("");
      });
    });
  </script>