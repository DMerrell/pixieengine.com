%form#new_file_modal.modal.hide.fade
  .modal-header
    %button.close(type='button' data-dismiss="modal") x
    %h3 New File

  .modal-body
    = label_tag "Choose Type"

  :ruby
    choices = [
      ["Script",
        {:type => "text", :directory => "source", :extension => "coffee", :language => "coffeescript", :template => "script"},
        {}
      ],
      ["Test",
        {:type => "text", :directory => "test", :extension => "coffee", :language => "coffeescript", :template => "test"},
        {}
      ],
      ["Image",
        {:type => "image", :directory => "images", :extension => "png"},
        {:width => 32, :height => 32}
      ],
      ["Sound",
        {:type => "sound", :directory => "sounds", :extension => "sfs"},
        {}
      ],
      ["Entity",
        {:type => "entity", :directory => "entities", :extension => "entity"},
        {}
      ],
      ["Tilemap",
        {:type => "tilemap", :directory => "tilemaps", :extension => "tilemap"},
        {:tilesWide => 15, :tilesTall => 10, :tileWidth => 32, :tileHeight => 32}
      ],
    ]

  .modal-footer
    - choices.each do |choice, params, fields|
      %button.btn.choice{ 'data-params' => params.to_json, 'data-fields' => fields.to_json }= choice

    .details{:style => "display: none;"}
      %label
        Name
        = text_field_tag :name, "", {:title => 'Name', :id => nil, :"tip" => 'There is already a file with this name. Files in the same directory must have different names.'}

      .fields

      %button.btn.btn-primary.create(disabled='disabled') Create
