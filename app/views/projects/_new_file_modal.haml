%form#new_file_modal.modal
  %h3.header New File

  = label_tag "Choose Type"

  :ruby
    choices = [
      ["Script",
        {:type => "text", :directory => "source", :extension => "coffee", :language => "coffeescript", :template => "script"},
        {}
      ],
      ["Test",
        {:type => "text", :directory => "test", :extension => "coffee", :language => "coffeescript", :template => "test"},
        {}
      ],
      ["Image",
        {:type => "image", :directory => "images", :extension => "png"},
        {:width => 32, :height => 32}
      ],
      ["Sound",
        {:type => "sound", :directory => "sounds", :extension => "sfs"},
        {}
      ],
      ["Entity",
        {:type => "entity", :directory => "entities", :extension => "entity"},
        {}
      ],
      ["Tilemap",
        {:type => "tilemap", :directory => "tilemaps", :extension => "tilemap"},
        {:tilesWide => 15, :tilesTall => 10, :tileWidth => 32, :tileHeight => 32}
      ],
    ]

  - choices.each do |choice, params, fields|
    %button.choice{ 'data-params' => params.to_json, 'data-fields' => fields.to_json }= choice

  .field.template
    %label
      ${name}
      %input(type="${inputType}" name="options[${name}]" title="${name}" value="${value}")

  .details{:style => "display: none;"}
    %label
      Name
      = text_field_tag :name, "", {:title => 'Name', :id => nil, :"tip" => 'There is already a file with this name. Files in the same directory must have different names.'}

    .fields

    %button.create(disabled='disabled') Create

= render :partial => "file_template"
